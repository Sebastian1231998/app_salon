"use strict";let cita={nombre:"",fecha:"",hora:"",servicios:[]};async function crearServicios(){const e=await fetch("../servicios.json"),t=await e.json(),{servicios:n}=t;n.forEach(e=>{const{id:t,nombre:n,precio:a}=e,o=document.createElement("P");o.textContent=n,o.classList.add("nombre-servicio");const c=document.createElement("P");c.textContent="$"+a,c.classList.add("precio-servicio");const i=document.createElement("DIV");i.classList.add("contenedor-servicio"),i.dataset.servicio=""+t,i.onclick=seleccionarDiv,i.appendChild(o),i.appendChild(c);document.querySelector(".listado-servicios").appendChild(i)})}function seleccionarDiv(e){let t;t="FONT"==e.target.tagName?e.target.parentElement.parentElement.parentElement:"P"==e.target.tagName?e.target.parentElement:e.target;const n=document.querySelector(`[data-servicio="${t.dataset.servicio}"]`);if(n.classList.contains("seleccionado"))n.classList.remove("seleccionado"),eliminandoCita(t.dataset.servicio),console.log(cita.servicios.length),0===cita.servicios.length&&(validarCita(),console.log("paso por validar cita"));else{n.classList.add("seleccionado"),console.log(t.firstElementChild.textContent),agregarCita({id:t.dataset.servicio,nombre:t.firstElementChild.textContent,precio:t.firstElementChild.nextElementSibling.textContent})}}function agregarCita(e){let{servicios:t}=cita;cita.servicios=[...t,e],console.log(cita)}function eliminandoCita(e){let{servicios:t}=cita;cita.servicios=t.filter(t=>t.id!==e),console.log(cita)}function validarCita(){let e=0;if(Object.values(cita).includes("")){document.querySelector(".contenido-parrafo")&&document.querySelector(".contenido-parrafo").remove(),document.querySelector(".titulo-informacion-cliente")&&document.querySelector(".titulo-informacion-cliente").remove(),document.querySelector(".contenido-informacion-cliente")&&document.querySelector(".contenido-informacion-cliente").remove();const e=document.createElement("div");e.classList.add("contenido-parrafo");const t=document.createElement("p");t.textContent="Faltan datos de Servicios nombre , fecha , hora ",t.classList.add("parrafo-vacio"),e.appendChild(t);document.querySelector(".contenido-resumen").appendChild(e)}else{document.querySelector(".contenido-informacion-cliente")&&document.querySelector(".contenido-informacion-cliente").remove();const{nombre:t,fecha:n,hora:a,servicios:o}=cita;document.querySelector(".contenido-parrafo")&&document.querySelector(".contenido-parrafo").remove(),document.querySelector(".titulo-informacion-cliente")&&document.querySelector(".titulo-informacion-cliente").remove();let c=document.createElement("h3");c.classList.add("titulo-informacion-cliente"),c.textContent="Informacion Cliente";let i=document.createElement("p");i.innerHTML="<span>Nombre:  </span>"+t;let r=document.createElement("p");r.innerHTML="<span>Fecha:  </span>"+n;let l,s=document.createElement("p");s.innerHTML="<span>Hora:  </span>"+a;let d=document.createElement("div");d.classList.add("contenido-informacion-cliente"),d.appendChild(i),d.appendChild(r),d.appendChild(s);const u=document.querySelector(".contenido-resumen");u.appendChild(c),u.appendChild(d);let m=document.createElement("h3");if(m.textContent="Informacion servicios",l=document.createElement("div"),d.classList.add("contenido-informacion-servicio"),d.appendChild(m),o.forEach(t=>{let n=document.createElement("p");n.classList.add("nombre-servicio"),n.innerHTML=` ${t.nombre} `;let a=document.createElement("p");a.classList.add("precio-servicio"),a.innerHTML=`$ ${t.precio} `,d.appendChild(n),d.appendChild(a);let o=t.precio.split("$");e+=parseInt(o[1])}),0===cita.servicios.length){let e=document.createElement("p");e.classList.add("nombre-servicio"),e.innerHTML="Los servicios estan vac√≠os, seleccionelos para continuar",d.appendChild(e)}else{let t=document.createElement("p");t.classList.add("cantidad-pagar"),t.innerHTML=` <span>Total Pagar: </span>$ ${e} `,d.appendChild(t)}u.appendChild(l)}}function validacionInputNombre(){document.querySelector("#nombre").addEventListener("input",(function(e){if(e.target.value.length<=3||""==e.target.value.trim())return mensajeError("el nombre es muy corto o no puede estar vacio","error"),void(cita.nombre="");cita.nombre=e.target.value.trim()}))}function mensajeError(e,t){let n=document.createElement("p");n.innerHTML=`<span> ${e}</span> `,n.classList.add("erro-p");let a=document.createElement("div");a.classList.add(t),a.appendChild(n),document.querySelector(".error")&&(console.log("Esta pasando por aqui"),document.querySelector(".error").remove());document.querySelector(".formulario").appendChild(a),setTimeout(()=>{a.remove()},3e3)}function validacionInputFecha(){document.querySelector("#fecha").addEventListener("input",(function(e){let t=new Date(e.target.value).getUTCDay();validarFechaAnterior(fecha),console.log([0].includes(t)),[0].includes(t)||[6].includes(t)?(mensajeError("No hay citas para sabados o domingos","error"),e.target.value="",cita.fecha=""):cita.fecha=e.target.value,console.log(cita)})),validarFechaAnterior()}function validarFechaAnterior(e){let t=document.querySelector("#fecha"),n=new Date,a=n.getUTCFullYear(),o=n.getMonth()+1,c=n.getDate();console.log(`${a}-0${o}-0${c}`),t.min=`${a}-0${o}-0${c}`}function validacionInputHora(){document.querySelector("#hora").addEventListener("input",(function(e){let t=e.target.value.split(":");if(console.log(parseInt(t[0])),t[0]>21||t[0]<8)return mensajeError("No hay citas antes de las 8AM o despues de las 10PM","error"),cita.hora="",void(e.target.value="");cita.hora=e.target.value}))}document.addEventListener("DOMContentLoaded",(function(){crearServicios(),validarCita(),validacionInputNombre(),validacionInputFecha(),validacionInputHora()}));let pagina=1,array=[1,2,3,4,5,6,7,8,9];function cambiarTabs(){document.querySelector(".mostrar-seccion")&&document.querySelector(".mostrar-seccion").classList.remove("mostrar-seccion");document.querySelector("#paso-"+pagina).classList.add("mostrar-seccion"),document.querySelector(".tab-seleccionado")&&document.querySelector(".tab-seleccionado").classList.remove("tab-seleccionado");document.querySelector(`[data-paso="${pagina}"]`).classList.add("tab-seleccionado")}function cambiarSeccion(){document.querySelectorAll(".tabs button").forEach(e=>{e.addEventListener("click",(function(e){let t;t="FONT"==e.target.tagName?e.target.parentElement.parentElement:e.target,pagina=parseInt(t.dataset.paso),validarPagina()}))})}function cambiarPaginacion(){document.querySelector("#button-siguiente").addEventListener("click",(function(e){pagina++,validarPagina()}))}function volverPaginacion(){document.querySelector("#button-anterior").addEventListener("click",(function(e){pagina--,validarPagina()}))}function validarPagina(){const e=document.querySelector("#button-anterior"),t=document.querySelector("#button-siguiente");1==pagina?(e.classList.add("ocultar"),t.classList.remove("ocultar")):2==pagina?(e.classList.remove("ocultar"),t.classList.remove("ocultar")):3==pagina&&(console.log(t),t.classList.add("ocultar"),e.classList.remove("ocultar"),validarCita()),cambiarTabs()}function devuelveNumArr(e){let t,n=0;return e.forEach(e=>{e===n?n++:(t=e-1,n+=2)}),e.length===n&&(t=n),t}document.addEventListener("DOMContentLoaded",(function(){cambiarSeccion(),cambiarTabs(),cambiarPaginacion(),volverPaginacion(),validarPagina(),console.log("este el numero que falta"+devuelveNumArr(array))}));
//# sourceMappingURL=bundle.js.map
